katakana = [
  # Monographs
  { char: 'ア',  sound: 'a' },
  { char: 'イ',  sound: 'i' },
  { char: 'ウ',  sound: 'u' },
  { char: 'エ',  sound: 'e' },
  { char: 'オ',  sound: 'o' },
  { char: 'カ',  sound: 'ka' },
  { char: 'キ',  sound: 'ki' },
  { char: 'ク',  sound: 'ku' },
  { char: 'ケ',  sound: 'ke' },
  { char: 'コ',  sound: 'ko' },
  { char: 'サ',  sound: 'sa' },
  { char: 'シ',  sound: 'shi' },
  { char: 'ス',  sound: 'su' },
  { char: 'セ',  sound: 'se' },
  { char: 'ソ',  sound: 'so' },
  { char: 'タ',  sound: 'ta' },
  { char: 'チ',  sound: 'chi' },
  { char: 'ツ',  sound: 'tsu' },
  { char: 'テ',  sound: 'te' },
  { char: 'ト',  sound: 'to' },
  { char: 'ナ',  sound: 'na' },
  { char: 'ニ',  sound: 'ni' },
  { char: 'ヌ',  sound: 'nu' },
  { char: 'ネ',  sound: 'ne' },
  { char: 'ノ',  sound: 'no' },
  { char: 'ハ',  sound: 'ha' },
  { char: 'ヒ',  sound: 'hi' },
  { char: 'フ',  sound: 'fu' },
  { char: 'ヘ',  sound: 'he' },
  { char: 'ホ',  sound: 'ho' },
  { char: 'マ',  sound: 'ma' },
  { char: 'ミ',  sound: 'mi' },
  { char: 'ム',  sound: 'mu' },
  { char: 'メ',  sound: 'me' },
  { char: 'モ',  sound: 'mo' },
  { char: 'ヤ',  sound: 'ya' },
  { char: 'ユ',  sound: 'yu' },
  { char: 'ヨ',  sound: 'yo' },
  { char: 'ラ',  sound: 'ra' },
  { char: 'リ',  sound: 'ri' },
  { char: 'ル',  sound: 'ru' },
  { char: 'レ',  sound: 're' },
  { char: 'ロ',  sound: 'ro' },
  { char: 'ワ',  sound: 'wa' },
  { char: 'ヰ',  sound: 'wi' },
  { char: 'ヱ',  sound: 'we' },
  { char: 'ヲ',  sound: 'wo' },
  { char: 'ン',  sound: 'n' },

  # Diacritics
  # { char: 'ガ', sound: 'ga' },
  # { char: 'ギ', sound: 'gi' },
  # { char: 'グ', sound: 'gu' },
  # { char: 'ゲ', sound: 'ge' },
  # { char: 'ゴ', sound: 'go' },
  # { char: 'ザ', sound: 'za' },
  # { char: 'ジ', sound: 'ji' },
  # { char: 'ズ', sound: 'zu' },
  # { char: 'ゼ', sound: 'ze' },
  # { char: 'ゾ', sound: 'zo' },
  # { char: 'ダ', sound: 'da' },
  # { char: 'ヂ', sound: 'ji' },
  # { char: 'ヅ', sound: 'zu' },
  # { char: 'デ', sound: 'de' },
  # { char: 'ド', sound: 'do' },
  # { char: 'バ', sound: 'ba' },
  # { char: 'ビ', sound: 'bi' },
  # { char: 'ブ', sound: 'bu' },
  # { char: 'ベ', sound: 'be' },
  # { char: 'ボ', sound: 'bo' },
  # { char: 'パ', sound: 'pa' },
  # { char: 'ピ', sound: 'pi' },
  # { char: 'プ', sound: 'pu' },
  # { char: 'ペ', sound: 'pe' },
  # { char: 'ポ', sound: 'po' },

  # Digraphs
  # { char: 'キャ', sound: 'kya' },
  # { char: 'キュ', sound: 'kyu' },
  # { char: 'キョ', sound: 'kyo' },
  # { char: 'シャ', sound: 'sha' },
  # { char: 'シュ', sound: 'shu' },
  # { char: 'ショ', sound: 'sho' },
  # { char: 'チャ', sound: 'cha' },
  # { char: 'チュ', sound: 'chu' },
  # { char: 'チョ', sound: 'cho' },
  # { char: 'ニャ', sound: 'nya' },
  # { char: 'ニュ', sound: 'nyu' },
  # { char: 'ニョ', sound: 'nyo' },
  # { char: 'ヒャ', sound: 'hya' },
  # { char: 'ヒュ', sound: 'hyu' },
  # { char: 'ヒョ', sound: 'hyo' },
  # { char: 'ミャ', sound: 'mya' },
  # { char: 'ミュ', sound: 'myu' },
  # { char: 'ミョ', sound: 'myo' },
  # { char: 'リャ', sound: 'rya' },
  # { char: 'リュ', sound: 'ryu' },
  # { char: 'リョ', sound: 'ryo' },

  # Digraphs with diacritics
  # { char: 'ギャ', sound: 'gya' },
  # { char: 'ギュ', sound: 'gyu' },
  # { char: 'ギョ', sound: 'gyo' },
  # { char: 'ジャ', sound: 'ja' },
  # { char: 'ジュ', sound: 'ju' },
  # { char: 'ジョ', sound: 'jo' },
  # { char: 'ヂャ', sound: 'ja' },
  # { char: 'ヂュ', sound: 'ju' },
  # { char: 'ヂョ', sound: 'jo' },
  # { char: 'ビャ', sound: 'bya' },
  # { char: 'ビュ', sound: 'byu' },
  # { char: 'ビョ', sound: 'byo' },
  # { char: 'ピャ', sound: 'pya' },
  # { char: 'ピュ', sound: 'pyu' },
  # { char: 'ピョ', sound: 'pyo' }
]

def test_trial(trial)
  puts trial[:char]

  correct = false

  answer = gets.strip
  if answer == trial[:sound]
    puts 'Correct!'
    correct = true
  else
    puts 'Incorrect!'
    puts "#{trial[:char]} - #{trial[:sound]}"
  end

  gets
  puts "\e[H\e[2J"
  correct
end

# # Progressive Learning
# trials = []

# no_mistakes = true

# Kernel.loop do
#   if no_mistakes
#     new_trial = katakana.sample
#     puts "#{new_trial[:char]} - #{new_trial[:sound]}"
#     trials << new_trial
#     katakana.delete(new_trial)
#     puts "Adding: (#{trials.count}) / #{katakana.count + trials.count}"
#   end

#   results = trials.shuffle.map { |trial| test_trial(trial) }
#   no_mistakes = !results.include?(false)
# end

# Full Test
incorrect = []
start_time = Time.now.to_i
# Test All
Kernel.loop do
  trial = katakana.sample
  break unless trial
  katakana.delete(trial)
  incorrect.push(trial) unless test_trial(trial)
  puts katakana.length
end

puts "Incorrect"
puts incorrect
end_time = Time.now.to_i
puts "Finished in #{end_time - start_time} seconds."