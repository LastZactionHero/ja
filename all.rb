katakana = [
  # Monographs
  { char: 'ア',  sound: 'a' },
  { char: 'イ',  sound: 'i' },
  { char: 'ウ',  sound: 'u' },
  { char: 'エ',  sound: 'e' },
  { char: 'オ',  sound: 'o' },
  { char: 'カ',  sound: 'ka' },
  { char: 'キ',  sound: 'ki' },
  { char: 'ク',  sound: 'ku' },
  { char: 'ケ',  sound: 'ke' },
  { char: 'コ',  sound: 'ko' },
  { char: 'サ',  sound: 'sa' },
  { char: 'シ',  sound: 'shi' },
  { char: 'ス',  sound: 'su' },
  { char: 'セ',  sound: 'se' },
  { char: 'ソ',  sound: 'so' },
  { char: 'タ',  sound: 'ta' },
  { char: 'チ',  sound: 'chi' },
  { char: 'ツ',  sound: 'tsu' },
  { char: 'テ',  sound: 'te' },
  { char: 'ト',  sound: 'to' },
  { char: 'ナ',  sound: 'na' },
  { char: 'ニ',  sound: 'ni' },
  { char: 'ヌ',  sound: 'nu' },
  { char: 'ネ',  sound: 'ne' },
  { char: 'ノ',  sound: 'no' },
  { char: 'ハ',  sound: 'ha' },
  { char: 'ヒ',  sound: 'hi' },
  { char: 'フ',  sound: 'fu' },
  { char: 'ヘ',  sound: 'he' },
  { char: 'ホ',  sound: 'ho' },
  { char: 'マ',  sound: 'ma' },
  { char: 'ミ',  sound: 'mi' },
  { char: 'ム',  sound: 'mu' },
  { char: 'メ',  sound: 'me' },
  { char: 'モ',  sound: 'mo' },
  { char: 'ヤ',  sound: 'ya' },
  { char: 'ユ',  sound: 'yu' },
  { char: 'ヨ',  sound: 'yo' },
  { char: 'ラ',  sound: 'ra' },
  { char: 'リ',  sound: 'ri' },
  { char: 'ル',  sound: 'ru' },
  { char: 'レ',  sound: 're' },
  { char: 'ロ',  sound: 'ro' },
  { char: 'ワ',  sound: 'wa' },
  { char: 'ヰ',  sound: 'wi' },
  { char: 'ヱ',  sound: 'we' },
  { char: 'ヲ',  sound: 'wo' },
  { char: 'ン',  sound: 'n' },

  # Diacritics
  { char: 'ガ', sound: 'ga' },
  { char: 'ギ', sound: 'gi' },
  { char: 'グ', sound: 'gu' },
  { char: 'ゲ', sound: 'ge' },
  { char: 'ゴ', sound: 'go' },
  { char: 'ザ', sound: 'za' },
  { char: 'ジ', sound: 'ji' },
  { char: 'ズ', sound: 'zu' },
  { char: 'ゼ', sound: 'ze' },
  { char: 'ゾ', sound: 'zo' },
  { char: 'ダ', sound: 'da' },
  { char: 'ヂ', sound: 'ji' },
  { char: 'ヅ', sound: 'zu' },
  { char: 'デ', sound: 'de' },
  { char: 'ド', sound: 'do' },
  { char: 'バ', sound: 'ba' },
  { char: 'ビ', sound: 'bi' },
  { char: 'ブ', sound: 'bu' },
  { char: 'ベ', sound: 'be' },
  { char: 'ボ', sound: 'bo' },
  { char: 'パ', sound: 'pa' },
  { char: 'ピ', sound: 'pi' },
  { char: 'プ', sound: 'pu' },
  { char: 'ペ', sound: 'pe' },
  { char: 'ポ', sound: 'po' },

  # Digraphs
  { char: 'キャ', sound: 'kya' },
  { char: 'キュ', sound: 'kyu' },
  { char: 'キョ', sound: 'kyo' },
  { char: 'シャ', sound: 'sha' },
  { char: 'シュ', sound: 'shu' },
  { char: 'ショ', sound: 'sho' },
  { char: 'チャ', sound: 'cha' },
  { char: 'チュ', sound: 'chu' },
  { char: 'チョ', sound: 'cho' },
  { char: 'ニャ', sound: 'nya' },
  { char: 'ニュ', sound: 'nyu' },
  { char: 'ニョ', sound: 'nyo' },
  { char: 'ヒャ', sound: 'hya' },
  { char: 'ヒュ', sound: 'hyu' },
  { char: 'ヒョ', sound: 'hyo' },
  { char: 'ミャ', sound: 'mya' },
  { char: 'ミュ', sound: 'myu' },
  { char: 'ミョ', sound: 'myo' },
  { char: 'リャ', sound: 'rya' },
  { char: 'リュ', sound: 'ryu' },
  { char: 'リョ', sound: 'ryo' },

  # Digraphs with diacritics
  { char: 'ギャ', sound: 'gya' },
  { char: 'ギュ', sound: 'gyu' },
  { char: 'ギョ', sound: 'gyo' },
  { char: 'ジャ', sound: 'ja' },
  { char: 'ジュ', sound: 'ju' },
  { char: 'ジョ', sound: 'jo' },
  { char: 'ヂャ', sound: 'ja' },
  { char: 'ヂュ', sound: 'ju' },
  { char: 'ヂョ', sound: 'jo' },
  { char: 'ビャ', sound: 'bya' },
  { char: 'ビュ', sound: 'byu' },
  { char: 'ビョ', sound: 'byo' },
  { char: 'ピャ', sound: 'pya' },
  { char: 'ピュ', sound: 'pyu' },
  { char: 'ピョ', sound: 'pyo' }
]

hiragana = [
  # Monographs
  { char: 'あ', sound: 'a' },
  { char: 'い', sound: 'i' },
  { char: 'う', sound: 'u' },
  { char: 'え', sound: 'e' },
  { char: 'お', sound: 'o' },
  { char: 'か', sound: 'ka' },
  { char: 'き', sound: 'ki' },
  { char: 'く', sound: 'ku' },
  { char: 'け', sound: 'ke' },
  { char: 'こ', sound: 'ko' },
  { char: 'さ', sound: 'sa' },
  { char: 'し', sound: 'shi' },
  { char: 'す', sound: 'su' },
  { char: 'せ', sound: 'se' },
  { char: 'そ', sound: 'so' },
  { char: 'た', sound: 'ta' },
  { char: 'ち', sound: 'chi' },
  { char: 'つ', sound: 'tsu' },
  { char: 'て', sound: 'te' },
  { char: 'と', sound: 'to' },
  { char: 'な', sound: 'na' },
  { char: 'に', sound: 'ni' },
  { char: 'ぬ', sound: 'nu' },
  { char: 'ね', sound: 'ne' },
  { char: 'の', sound: 'no' },
  { char: 'は', sound: 'ha' },
  { char: 'ひ', sound: 'hi' },
  { char: 'ふ', sound: 'fu' },
  { char: 'へ', sound: 'he' },
  { char: 'ほ', sound: 'ho' },
  { char: 'ま', sound: 'ma' },
  { char: 'み', sound: 'mi' },
  { char: 'む', sound: 'mu' },
  { char: 'め', sound: 'me' },
  { char: 'も', sound: 'mo' },
  { char: 'や', sound: 'ya' },
  { char: 'ゆ', sound: 'yu' },
  { char: 'よ', sound: 'yo' },
  { char: 'ら', sound: 'ra' },
  { char: 'り', sound: 'ri' },
  { char: 'る', sound: 'ru' },
  { char: 'れ', sound: 're' },
  { char: 'ろ', sound: 'ro' },
  { char: 'わ', sound: 'wa' },
  { char: 'ゐ', sound: 'wi' },
  { char: 'ゑ', sound: 'we' },
  { char: 'を', sound: 'wo' },
  { char: 'ん', sound: 'n' },

  # Diacritics
  { char: 'ぎ', sound: 'gi' },
  { char: 'ぐ', sound: 'gu' },
  { char: 'げ', sound: 'ge' },
  { char: 'ご', sound: 'go' },
  { char: 'ざ', sound: 'za' },
  { char: 'じ', sound: 'ji' },
  { char: 'ず', sound: 'zu' },
  { char: 'ぜ', sound: 'ze' },
  { char: 'ぞ', sound: 'zo' },
  { char: 'だ', sound: 'da' },
  { char: 'ぢ', sound: 'ji' },
  { char: 'づ', sound: 'zu' },
  { char: 'で', sound: 'de' },
  { char: 'ど', sound: 'do' },
  { char: 'ば', sound: 'ba' },
  { char: 'び', sound: 'bi' },
  { char: 'ぶ', sound: 'bu' },
  { char: 'べ', sound: 'be' },
  { char: 'ぼ', sound: 'bo' },
  { char: 'ぱ', sound: 'pa' },
  { char: 'ぴ', sound: 'pi' },
  { char: 'ぷ', sound: 'pu' },
  { char: 'ぺ', sound: 'pe' },
  { char: 'ぽ', sound: 'po' },

  # Digraphs
  { char: 'きゃ', sound: 'kya' },
  { char: 'きゅ', sound: 'kyu' },
  { char: 'きょ', sound: 'kyo' },
  { char: 'しゃ', sound: 'sha' },
  { char: 'しゅ', sound: 'shu' },
  { char: 'しょ', sound: 'sho' },
  { char: 'ちゃ', sound: 'cha' },
  { char: 'ちゅ', sound: 'chu' },
  { char: 'ちょ', sound: 'cho' },
  { char: 'にゃ', sound: 'nya' },
  { char: 'にゅ', sound: 'nyu' },
  { char: 'にょ', sound: 'nyo' },
  { char: 'ひゃ', sound: 'hya' },
  { char: 'ひゅ', sound: 'hyu' },
  { char: 'ひょ', sound: 'hyo' },
  { char: 'みゃ', sound: 'mya' },
  { char: 'みゅ', sound: 'myu' },
  { char: 'みょ', sound: 'myo' },
  { char: 'りゃ', sound: 'rya' },
  { char: 'りゅ', sound: 'ryu' },
  { char: 'りょ', sound: 'ryo' },

  # Digraphs with diacritics
  { char: 'ぢゃ', sound: 'ja' },
  { char: 'ぢゅ', sound: 'ju' },
  { char: 'ぢょ', sound: 'jo' },
  { char: 'じゃ', sound: 'ja' },
  { char: 'じゅ', sound: 'ju' },
  { char: 'じょ', sound: 'jo' },
  { char: 'ぎゃ', sound: 'gya' },
  { char: 'ぎゅ', sound: 'gyu' },
  { char: 'ぎょ', sound: 'gyo' },
  { char: 'びゃ', sound: 'bya' },
  { char: 'びゅ', sound: 'byu' },
  { char: 'びょ', sound: 'byo' },
  { char: 'ぴゃ', sound: 'pya' },
  { char: 'ぴゅ', sound: 'pyu' },
  { char: 'ぴょ', sound: 'pyo' }
]

characters = katakana + hiragana

def test_trial(trial)
  puts trial[:char]

  correct = false

  answer = gets.strip
  if answer == trial[:sound]
    puts 'Correct!'
    correct = true
  else
    puts 'Incorrect!'
    puts "#{trial[:char]} - #{trial[:sound]}"
  end

  gets
  puts "\e[H\e[2J"
  correct
end


# Full Test
incorrect = []
start_time = Time.now.to_i
# Test All
Kernel.loop do
  trial = characters.sample
  break unless trial
  characters.delete(trial)
  incorrect.push(trial) unless test_trial(trial)
  puts characters.length
end

puts "Incorrect"
puts incorrect
end_time = Time.now.to_i
puts "Finished in #{end_time - start_time} seconds."